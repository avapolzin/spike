

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Drizzled PSFs from HST/ACS Imaging &mdash; spike 1.0.6 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="_static/nbsphinx-code-cells.css?v=2aa19091" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=e2a723ec"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
      <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
      <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
      <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Resampled PSFs from JWST/NIRCam Imaging" href="nircam_example.html" />
    <link rel="prev" title="Citation" href="citation.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            spike
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Documentation:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation &amp; Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quickstart Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="psf.html">Top-level Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="psfgen.html">PSF Generation</a></li>
<li class="toctree-l1"><a class="reference internal" href="tools.html">Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">FAQs</a></li>
<li class="toctree-l1"><a class="reference internal" href="citation.html">Citation</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Examples:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Drizzled PSFs from <em>HST</em>/ACS Imaging</a></li>
<li class="toctree-l1"><a class="reference internal" href="nircam_example.html">Resampled PSFs from <em>JWST</em>/NIRCam Imaging</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">spike</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Drizzled PSFs from <em>HST</em>/ACS Imaging</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/acs_example.nblink.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="Drizzled-PSFs-from-HST/ACS-Imaging">
<h1>Drizzled PSFs from <em>HST</em>/ACS Imaging<a class="headerlink" href="#Drizzled-PSFs-from-HST/ACS-Imaging" title="Link to this heading"></a></h1>
<p>This example notebook shows how <code class="docutils literal notranslate"><span class="pre">spike</span></code> interacts with <em>HST</em>/ACS imaging to generate a drizzled PSF. This notebook uses observations from <a class="reference external" href="https://archive.stsci.edu/cgi-bin/mastpreview?mission=hst&amp;dataid=J8PU42010">this program</a>. The easiest way to find these data in the MAST archive is by searching for observation ID j8pu42010. <code class="docutils literal notranslate"><span class="pre">spike</span></code> uses calibrated, but not-yet co-added images (i.e., “Level 2” data products), so be sure that your download includes ‘flc’ files. If you download all of
the files associated with this program, your working directory will include:</p>
<ul class="simple">
<li><p>j8pu42ecq_flc.fits</p></li>
<li><p>j8pu42egq_flc.fits</p></li>
<li><p>j8pu42esq_flc.fits</p></li>
<li><p>j8pu42evq_flc.fits</p></li>
</ul>
<p>The principle of this example notebook is the same regardless of dataset, though, so it can be used as a direct guide for use with other data, too.</p>
<p>NOTE: Environment variables are not always read in properly within Jupyter notebooks/JupyterLab – see <a class="reference external" href="https://github.com/avapolzin/spike/blob/master/example_notebooks/README.md">here</a> for some additional details of how to access them.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">spike.psf</span> <span class="kn">import</span> <span class="n">hst</span> <span class="c1"># import the relevant top-level module from spike</span>

<span class="n">datapath</span> <span class="o">=</span> <span class="s1">&#39;/path/to/acs/data&#39;</span>
<span class="n">outputpath</span> <span class="o">=</span> <span class="s1">&#39;psfs&#39;</span> <span class="c1">#default is /psfs, defined from your working directory</span>
</pre></div>
</div>
</div>
<p>Note that if you choose to create drizzled PSFs for the same data and object location using multiple PSF generation methods, you will want to define a new ‘savedir’ each time to avoid conflicts between files with the same name.</p>
<p>We’ll also define an object – in this case, a set of coordinates – for which the PSF will be generated.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">obj</span> <span class="o">=</span> <span class="s1">&#39;10:00:33.0178 +02:09:52.304&#39;</span> <span class="c1">#can also be a resolvable name or coordinates in decimal degrees</span>
</pre></div>
</div>
</div>
<p>Now, we can call <code class="docutils literal notranslate"><span class="pre">spike.psf.hst</span></code> – as an initial example we’ll use the most minimal inputs. By default, in addition to saving drizzled PSFs and any intermediate products in the directory given by ‘savedir’ (here the argument will be the outputpath variable we definied), this function will return a dictionary that stores model PSFs indexed by filter and object.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">returnpsf</span> <span class="pre">=</span> <span class="pre">'full'</span></code> (default), the arrays in the dictionary will be the full drizzled image field of view. If <code class="docutils literal notranslate"><span class="pre">returnpsf</span> <span class="pre">=</span> <span class="pre">'crop'</span></code>, the arrays in the dictionary will be the cutout region around the object location with the size of the cutout determined by the ‘cutout_fov’ argument; the cropped region around the drizzled PSF will also be saved as a FITS file, including its WCS information (can be toggled off with <code class="docutils literal notranslate"><span class="pre">savecutout</span> <span class="pre">=</span> <span class="pre">False</span></code>).</p>
<p><code class="docutils literal notranslate"><span class="pre">spike</span></code> assumes that the input files have not yet been “tweaked” and handles that step for you. If your input images have been tweaked <em>or</em> if you would like to skip this step for other reasons, specify <code class="docutils literal notranslate"><span class="pre">pretweaked</span> <span class="pre">=</span> <span class="pre">True</span></code> in calling <code class="docutils literal notranslate"><span class="pre">spike.psf.hst</span></code>.</p>
<p>The outputs are very long due to all of the print statements from the tweak, PSF generation, and drizzling steps. Outputs have been cleared for cells where <code class="docutils literal notranslate"><span class="pre">spike.psf.hst</span></code> was run.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dpsf</span> <span class="o">=</span> <span class="n">hst</span><span class="p">(</span><span class="n">img_dir</span> <span class="o">=</span> <span class="n">datapath</span><span class="p">,</span> <span class="n">obj</span> <span class="o">=</span> <span class="n">obj</span><span class="p">,</span> <span class="n">img_type</span> <span class="o">=</span> <span class="s1">&#39;flc&#39;</span><span class="p">,</span> <span class="n">inst</span> <span class="o">=</span> <span class="s1">&#39;ACS&#39;</span><span class="p">,</span> <span class="n">camera</span> <span class="o">=</span> <span class="s1">&#39;WFC&#39;</span><span class="p">,</span>
           <span class="n">savedir</span> <span class="o">=</span> <span class="n">outputpath</span><span class="p">,</span> <span class="n">pretweaked</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>In this case dpsf will be very simple, since we are only looking at one set of coordinates and one filter:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dpsf</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
{&#39;10:00:33.0178 +02:09:52.304&#39;: {&#39;F475W&#39;: array([[ 0.,  0.,  0., ..., nan, nan, nan],
         [ 0.,  0.,  0., ..., nan, nan, nan],
         [ 0.,  0.,  0., ..., nan, nan, nan],
         ...,
         [nan, nan, nan, ...,  0.,  0.,  0.],
         [nan, nan, nan, ...,  0.,  0.,  0.],
         [nan, nan, nan, ...,  0.,  0.,  0.]],
        shape=(2359, 4162), dtype=&#39;&gt;f4&#39;)}}
</pre></div></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">spike</span></code> can automatically plot model PSFs as they are generated, and generates PSFs regardless of whether they are plotted (or returned). To show the output drizzled PSFs here, we will plot them directly. Therefore, we will import <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code> below. Since <code class="docutils literal notranslate"><span class="pre">returnpsf</span> <span class="pre">=</span> <span class="pre">'full'</span></code> by default, the array stored in dpsf shows the drizzled PSF in the context of the entire co-added image footprint. This is equivalent to reading in the image stored in
‘150d08m15.267s+2d09m52.304s_F475W_psf_drz.fits’.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="n">dat</span> <span class="o">=</span> <span class="n">dpsf</span><span class="p">[</span><span class="s1">&#39;10:00:33.0178 +02:09:52.304&#39;</span><span class="p">][</span><span class="s1">&#39;F475W&#39;</span><span class="p">]</span>

<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">dat</span><span class="p">,</span> <span class="n">vmin</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nanpercentile</span><span class="p">(</span><span class="n">dat</span><span class="p">[</span><span class="n">dat</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">],</span> <span class="mi">20</span><span class="p">),</span> <span class="n">vmax</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nanpercentile</span><span class="p">(</span><span class="n">dat</span><span class="p">[</span><span class="n">dat</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">],</span> <span class="mi">97</span><span class="p">),</span>
            <span class="n">origin</span> <span class="o">=</span> <span class="s1">&#39;lower&#39;</span><span class="p">,</span> <span class="n">cmap</span> <span class="o">=</span> <span class="s1">&#39;Greys&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;x (pix)&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;y (pix)&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Text(0, 0.5, &#39;y (pix)&#39;)
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/acs_example_9_1.png" src="_images/acs_example_9_1.png" />
</div>
</div>
<p>We can index the array to just show the PSF below:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dat</span> <span class="o">=</span> <span class="n">dpsf</span><span class="p">[</span><span class="s1">&#39;10:00:33.0178 +02:09:52.304&#39;</span><span class="p">][</span><span class="s1">&#39;F475W&#39;</span><span class="p">][</span><span class="mi">325</span><span class="p">:</span><span class="mi">465</span><span class="p">,</span> <span class="mi">940</span><span class="p">:</span><span class="mi">1080</span><span class="p">]</span>

<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">dat</span><span class="p">,</span> <span class="n">vmin</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nanpercentile</span><span class="p">(</span><span class="n">dat</span><span class="p">[</span><span class="n">dat</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">],</span> <span class="mi">20</span><span class="p">),</span> <span class="n">vmax</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nanpercentile</span><span class="p">(</span><span class="n">dat</span><span class="p">[</span><span class="n">dat</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">],</span> <span class="mi">97</span><span class="p">),</span>
            <span class="n">origin</span> <span class="o">=</span> <span class="s1">&#39;lower&#39;</span><span class="p">,</span> <span class="n">cmap</span> <span class="o">=</span> <span class="s1">&#39;Greys&#39;</span><span class="p">,</span> <span class="n">extent</span> <span class="o">=</span> <span class="p">[</span><span class="mi">940</span><span class="p">,</span> <span class="mi">1080</span><span class="p">,</span> <span class="mi">325</span><span class="p">,</span> <span class="mi">465</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;x (pix)&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;y (pix)&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Text(0, 0.5, &#39;y (pix)&#39;)
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/acs_example_11_1.png" src="_images/acs_example_11_1.png" />
</div>
</div>
<p>By default, PSFs are generated for <code class="docutils literal notranslate"><span class="pre">spike.psf.hst</span></code> by <code class="docutils literal notranslate"><span class="pre">TinyTim</span></code> using a blackbody model of a G5V star at 6000 K, but users have complete control over the specifics of the PSF generation. To change the parameters within a method (e.g., updating model arguments, setting different detection thresholds for the empirical PSFs, …), <code class="docutils literal notranslate"><span class="pre">spike.psf.hst</span></code> directly takes keyword arguments for specified ‘method’. Details of allowed arguments are available in the <code class="docutils literal notranslate"><span class="pre">spike.psfgen</span></code>
<a class="reference external" href="https://spike-psf.readthedocs.io/en/latest/psfgen.html">documentation</a>. As an example, we will change the <code class="docutils literal notranslate"><span class="pre">TinyTim</span></code> model inputs to use an O6 star at 45000 K:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dpsf</span> <span class="o">=</span> <span class="n">hst</span><span class="p">(</span><span class="n">img_dir</span> <span class="o">=</span> <span class="n">datapath</span><span class="p">,</span> <span class="n">obj</span> <span class="o">=</span> <span class="n">obj</span><span class="p">,</span> <span class="n">img_type</span> <span class="o">=</span> <span class="s1">&#39;flc&#39;</span><span class="p">,</span> <span class="n">inst</span> <span class="o">=</span> <span class="s1">&#39;ACS&#39;</span><span class="p">,</span> <span class="n">camera</span> <span class="o">=</span> <span class="s1">&#39;WFC&#39;</span><span class="p">,</span>
            <span class="n">savedir</span> <span class="o">=</span> <span class="n">outputpath</span><span class="p">,</span> <span class="n">pretweaked</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">listchoice</span> <span class="o">=</span> <span class="s1">&#39;O6&#39;</span><span class="p">,</span> <span class="n">temp</span> <span class="o">=</span> <span class="mi">45000</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>As before, we’ll plot the outputs directly:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dat</span> <span class="o">=</span> <span class="n">dpsf</span><span class="p">[</span><span class="s1">&#39;10:00:33.0178 +02:09:52.304&#39;</span><span class="p">][</span><span class="s1">&#39;F475W&#39;</span><span class="p">]</span>
<span class="n">datcrop</span> <span class="o">=</span> <span class="n">dpsf</span><span class="p">[</span><span class="s1">&#39;10:00:33.0178 +02:09:52.304&#39;</span><span class="p">][</span><span class="s1">&#39;F475W&#39;</span><span class="p">][</span><span class="mi">325</span><span class="p">:</span><span class="mi">465</span><span class="p">,</span> <span class="mi">940</span><span class="p">:</span><span class="mi">1080</span><span class="p">]</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">gridspec_kw</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;width_ratios&#39;</span><span class="p">:[</span><span class="mf">1.75</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="s1">&#39;wspace&#39;</span><span class="p">:</span><span class="mf">0.3</span><span class="p">})</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">dat</span><span class="p">,</span> <span class="n">vmin</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nanpercentile</span><span class="p">(</span><span class="n">dat</span><span class="p">[</span><span class="n">dat</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">],</span> <span class="mi">20</span><span class="p">),</span> <span class="n">vmax</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nanpercentile</span><span class="p">(</span><span class="n">dat</span><span class="p">[</span><span class="n">dat</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">],</span> <span class="mi">97</span><span class="p">),</span>
            <span class="n">origin</span> <span class="o">=</span> <span class="s1">&#39;lower&#39;</span><span class="p">,</span> <span class="n">cmap</span> <span class="o">=</span> <span class="s1">&#39;Greys&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;x (pix)&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;y (pix)&#39;</span><span class="p">)</span>

<span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">datcrop</span><span class="p">,</span> <span class="n">origin</span> <span class="o">=</span> <span class="s1">&#39;lower&#39;</span><span class="p">,</span> <span class="n">cmap</span> <span class="o">=</span> <span class="s1">&#39;Greys&#39;</span><span class="p">,</span> <span class="n">extent</span> <span class="o">=</span> <span class="p">[</span><span class="mi">940</span><span class="p">,</span> <span class="mi">1080</span><span class="p">,</span> <span class="mi">325</span><span class="p">,</span> <span class="mi">465</span><span class="p">],</span>
             <span class="n">vmin</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nanpercentile</span><span class="p">(</span><span class="n">datcrop</span><span class="p">[</span><span class="n">datcrop</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">],</span> <span class="mi">20</span><span class="p">),</span>
             <span class="n">vmax</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nanpercentile</span><span class="p">(</span><span class="n">datcrop</span><span class="p">[</span><span class="n">datcrop</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">],</span> <span class="mi">97</span><span class="p">))</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;x (pix)&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;y (pix)&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Text(0, 0.5, &#39;y (pix)&#39;)
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/acs_example_15_1.png" src="_images/acs_example_15_1.png" />
</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">spike</span></code> can also be used to generate PSFs for multiple objects/coordinates simultaneously.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">obj</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;10:00:33.0178 +02:09:52.304&#39;</span><span class="p">,</span> <span class="s1">&#39;10:00:28.1798 +02:08:40.507&#39;</span><span class="p">]</span>

<span class="n">dpsf</span> <span class="o">=</span> <span class="n">hst</span><span class="p">(</span><span class="n">img_dir</span> <span class="o">=</span> <span class="n">datapath</span><span class="p">,</span> <span class="n">obj</span> <span class="o">=</span> <span class="n">obj</span><span class="p">,</span> <span class="n">img_type</span> <span class="o">=</span> <span class="s1">&#39;flc&#39;</span><span class="p">,</span> <span class="n">inst</span> <span class="o">=</span> <span class="s1">&#39;ACS&#39;</span><span class="p">,</span> <span class="n">camera</span> <span class="o">=</span> <span class="s1">&#39;WFC&#39;</span><span class="p">,</span>
           <span class="n">savedir</span> <span class="o">=</span> <span class="n">outputpath</span><span class="p">,</span> <span class="n">pretweaked</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dpsf</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
{&#39;10:00:33.0178 +02:09:52.304&#39;: {&#39;F475W&#39;: array([[ 0.,  0.,  0., ..., nan, nan, nan],
         [ 0.,  0.,  0., ..., nan, nan, nan],
         [ 0.,  0.,  0., ..., nan, nan, nan],
         ...,
         [nan, nan, nan, ...,  0.,  0.,  0.],
         [nan, nan, nan, ...,  0.,  0.,  0.],
         [nan, nan, nan, ...,  0.,  0.,  0.]],
        shape=(2359, 4162), dtype=&#39;&gt;f4&#39;)},
 &#39;10:00:28.1798 +02:08:40.507&#39;: {&#39;F475W&#39;: array([[ 0.,  0.,  0., ..., nan, nan, nan],
         [ 0.,  0.,  0., ..., nan, nan, nan],
         [ 0.,  0.,  0., ..., nan, nan, nan],
         ...,
         [nan, nan, nan, ...,  0.,  0.,  0.],
         [nan, nan, nan, ...,  0.,  0.,  0.],
         [nan, nan, nan, ...,  0.,  0.,  0.]],
        shape=(2359, 4162), dtype=&#39;&gt;f4&#39;)}}
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dat</span> <span class="o">=</span> <span class="n">dpsf</span><span class="p">[</span><span class="s1">&#39;10:00:33.0178 +02:09:52.304&#39;</span><span class="p">][</span><span class="s1">&#39;F475W&#39;</span><span class="p">]</span>
<span class="n">datcrop</span> <span class="o">=</span> <span class="n">dpsf</span><span class="p">[</span><span class="s1">&#39;10:00:33.0178 +02:09:52.304&#39;</span><span class="p">][</span><span class="s1">&#39;F475W&#39;</span><span class="p">][</span><span class="mi">325</span><span class="p">:</span><span class="mi">465</span><span class="p">,</span> <span class="mi">940</span><span class="p">:</span><span class="mi">1080</span><span class="p">]</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">gridspec_kw</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;width_ratios&#39;</span><span class="p">:[</span><span class="mf">1.75</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="s1">&#39;wspace&#39;</span><span class="p">:</span><span class="mf">0.3</span><span class="p">})</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">dat</span><span class="p">,</span> <span class="n">vmin</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nanpercentile</span><span class="p">(</span><span class="n">dat</span><span class="p">[</span><span class="n">dat</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">],</span> <span class="mi">20</span><span class="p">),</span> <span class="n">vmax</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nanpercentile</span><span class="p">(</span><span class="n">dat</span><span class="p">[</span><span class="n">dat</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">],</span> <span class="mi">97</span><span class="p">),</span>
            <span class="n">origin</span> <span class="o">=</span> <span class="s1">&#39;lower&#39;</span><span class="p">,</span> <span class="n">cmap</span> <span class="o">=</span> <span class="s1">&#39;Greys&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;x (pix)&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;y (pix)&#39;</span><span class="p">)</span>

<span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">datcrop</span><span class="p">,</span> <span class="n">origin</span> <span class="o">=</span> <span class="s1">&#39;lower&#39;</span><span class="p">,</span> <span class="n">cmap</span> <span class="o">=</span> <span class="s1">&#39;Greys&#39;</span><span class="p">,</span> <span class="n">extent</span> <span class="o">=</span> <span class="p">[</span><span class="mi">940</span><span class="p">,</span> <span class="mi">1080</span><span class="p">,</span> <span class="mi">325</span><span class="p">,</span> <span class="mi">465</span><span class="p">],</span>
             <span class="n">vmin</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nanpercentile</span><span class="p">(</span><span class="n">datcrop</span><span class="p">[</span><span class="n">datcrop</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">],</span> <span class="mi">20</span><span class="p">),</span>
             <span class="n">vmax</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nanpercentile</span><span class="p">(</span><span class="n">datcrop</span><span class="p">[</span><span class="n">datcrop</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">],</span> <span class="mi">97</span><span class="p">))</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;x (pix)&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;y (pix)&#39;</span><span class="p">)</span>


<span class="n">dat</span> <span class="o">=</span> <span class="n">dpsf</span><span class="p">[</span><span class="s1">&#39;10:00:28.1798 +02:08:40.507&#39;</span><span class="p">][</span><span class="s1">&#39;F475W&#39;</span><span class="p">]</span>
<span class="n">datcrop</span> <span class="o">=</span> <span class="n">dpsf</span><span class="p">[</span><span class="s1">&#39;10:00:28.1798 +02:08:40.507&#39;</span><span class="p">][</span><span class="s1">&#39;F475W&#39;</span><span class="p">][</span><span class="mi">1504</span><span class="p">:</span><span class="mi">1644</span><span class="p">,</span> <span class="mi">2605</span><span class="p">:</span><span class="mi">2745</span><span class="p">]</span>

<span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">dat</span><span class="p">,</span> <span class="n">vmin</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nanpercentile</span><span class="p">(</span><span class="n">dat</span><span class="p">[</span><span class="n">dat</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">],</span> <span class="mi">20</span><span class="p">),</span> <span class="n">vmax</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nanpercentile</span><span class="p">(</span><span class="n">dat</span><span class="p">[</span><span class="n">dat</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">],</span> <span class="mi">97</span><span class="p">),</span>
            <span class="n">origin</span> <span class="o">=</span> <span class="s1">&#39;lower&#39;</span><span class="p">,</span> <span class="n">cmap</span> <span class="o">=</span> <span class="s1">&#39;Greys&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;x (pix)&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;y (pix)&#39;</span><span class="p">)</span>

<span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">datcrop</span><span class="p">,</span> <span class="n">origin</span> <span class="o">=</span> <span class="s1">&#39;lower&#39;</span><span class="p">,</span> <span class="n">cmap</span> <span class="o">=</span> <span class="s1">&#39;Greys&#39;</span><span class="p">,</span> <span class="n">extent</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2605</span><span class="p">,</span> <span class="mi">2745</span><span class="p">,</span> <span class="mi">1504</span><span class="p">,</span> <span class="mi">1644</span><span class="p">],</span>
             <span class="n">vmin</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nanpercentile</span><span class="p">(</span><span class="n">datcrop</span><span class="p">[</span><span class="n">datcrop</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">],</span> <span class="mi">20</span><span class="p">),</span>
             <span class="n">vmax</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nanpercentile</span><span class="p">(</span><span class="n">datcrop</span><span class="p">[</span><span class="n">datcrop</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">],</span> <span class="mi">97</span><span class="p">))</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;x (pix)&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;y (pix)&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Text(0, 0.5, &#39;y (pix)&#39;)
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/acs_example_19_1.png" src="_images/acs_example_19_1.png" />
</div>
</div>
<p>One advantage of <code class="docutils literal notranslate"><span class="pre">spike</span></code> is that it can be used flexibly with a variety of different PSF generation methods – to change which one is used, simply use the ‘method’ argument. Built-in options are:</p>
<ul class="simple">
<li><p>‘TinyTim’</p></li>
<li><p>‘TinyTim_Gillis’</p></li>
<li><p>‘STDPSF’</p></li>
<li><p>‘epsf’</p></li>
<li><p>‘PSFEx’</p></li>
</ul>
<p>If <code class="docutils literal notranslate"><span class="pre">method</span> <span class="pre">=</span> <span class="pre">'USER'</span></code>, then the keyword argument ‘usermethod’ must also be specified, pointing to either a function or a directory that houses model PSFs that follow the [imgprefix]_[coords]_[band]_topsf.fits, e.g., imgprefix_23.31+30.12_F814W_topsf.fits or imgprefix_195.78-46.52_F555W_topsf.fits naming scheme.</p>
<p>We’ll use STDPSFs below and have <code class="docutils literal notranslate"><span class="pre">spike</span></code> output cutouts around the drizzled PSF.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">obj</span> <span class="o">=</span> <span class="s1">&#39;10:00:33.0178 +02:09:52.304&#39;</span>

<span class="n">dpsf</span> <span class="o">=</span> <span class="n">hst</span><span class="p">(</span><span class="n">img_dir</span> <span class="o">=</span> <span class="n">datapath</span><span class="p">,</span> <span class="n">obj</span> <span class="o">=</span> <span class="n">obj</span><span class="p">,</span> <span class="n">img_type</span> <span class="o">=</span> <span class="s1">&#39;flc&#39;</span><span class="p">,</span> <span class="n">inst</span> <span class="o">=</span> <span class="s1">&#39;ACS&#39;</span><span class="p">,</span> <span class="n">camera</span> <span class="o">=</span> <span class="s1">&#39;WFC&#39;</span><span class="p">,</span>
           <span class="n">savedir</span> <span class="o">=</span> <span class="n">outputpath</span><span class="p">,</span> <span class="n">pretweaked</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">method</span> <span class="o">=</span> <span class="s1">&#39;STDPSF&#39;</span><span class="p">,</span> <span class="n">returnpsf</span> <span class="o">=</span> <span class="s1">&#39;crop&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dpsf</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
{&#39;10:00:33.0178 +02:09:52.304&#39;: {&#39;F475W&#39;: array([[0., 0., 0., ..., 0., 0., 0.],
         [0., 0., 0., ..., 0., 0., 0.],
         [0., 0., 0., ..., 0., 0., 0.],
         ...,
         [0., 0., 0., ..., 0., 0., 0.],
         [0., 0., 0., ..., 0., 0., 0.],
         [0., 0., 0., ..., 0., 0., 0.]], shape=(151, 151), dtype=&#39;&gt;f4&#39;)}}
</pre></div></div>
</div>
<p>Since we’ve selected <code class="docutils literal notranslate"><span class="pre">returnpsf</span> <span class="pre">=</span> <span class="pre">'crop'</span></code>, the output array is already cropped to the immediate region around the PSF. Selecting both <code class="docutils literal notranslate"><span class="pre">returnpsf</span> <span class="pre">=</span> <span class="pre">'crop'</span></code> and <code class="docutils literal notranslate"><span class="pre">savecutout</span> <span class="pre">=</span> <span class="pre">True</span></code> (default), will save a FITS file that stores the cropped drizzled PSF – the name is the same as the for the full saved image with ‘_crop’ appended.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dat</span> <span class="o">=</span> <span class="n">dpsf</span><span class="p">[</span><span class="s1">&#39;10:00:33.0178 +02:09:52.304&#39;</span><span class="p">][</span><span class="s1">&#39;F475W&#39;</span><span class="p">]</span>

<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">dat</span><span class="p">,</span> <span class="n">vmin</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nanpercentile</span><span class="p">(</span><span class="n">dat</span><span class="p">[</span><span class="n">dat</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">],</span> <span class="mi">20</span><span class="p">),</span> <span class="n">vmax</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nanpercentile</span><span class="p">(</span><span class="n">dat</span><span class="p">[</span><span class="n">dat</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">],</span> <span class="mi">97</span><span class="p">),</span>
            <span class="n">origin</span> <span class="o">=</span> <span class="s1">&#39;lower&#39;</span><span class="p">,</span> <span class="n">cmap</span> <span class="o">=</span> <span class="s1">&#39;Greys&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;x (pix)&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;y (pix)&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Text(0, 0.5, &#39;y (pix)&#39;)
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/acs_example_24_1.png" src="_images/acs_example_24_1.png" />
</div>
</div>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="citation.html" class="btn btn-neutral float-left" title="Citation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="nircam_example.html" class="btn btn-neutral float-right" title="Resampled PSFs from JWST/NIRCam Imaging" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Ava Polzin.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>